# Multi-Tenant SSO Production Environment Configuration
# Copy this file to .env.production and fill in your actual values

# =============================================================================
# APPLICATION CONFIGURATION
# =============================================================================
APP_NAME="Multi-Tenant SSO"
APP_ENV=production
APP_DEBUG=false
APP_URL=https://sso.your-domain.com
APP_KEY=base64:GENERATED_KEY_REPLACE_ME
APP_TIMEZONE=UTC

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================
DB_CONNECTION=mysql
DB_HOST=mariadb
DB_PORT=3306
DB_DATABASE=sso_main
DB_USERNAME=sso_user
DB_PASSWORD=REPLACE_WITH_SECURE_PASSWORD

# Database Pool Configuration
DB_POOL_MIN=5
DB_POOL_MAX=50
DB_TIMEOUT=60

# =============================================================================
# JWT CONFIGURATION
# =============================================================================
JWT_SECRET=REPLACE_WITH_32_CHARACTER_SECRET
JWT_TTL=60
JWT_REFRESH_TTL=20160
JWT_ALGO=HS256
JWT_BLACKLIST_ENABLED=true
JWT_BLACKLIST_GRACE_PERIOD=10

# =============================================================================
# REDIS CONFIGURATION
# =============================================================================
REDIS_HOST=redis
REDIS_PASSWORD=REPLACE_WITH_SECURE_PASSWORD
REDIS_PORT=6379
REDIS_DB=0

# =============================================================================
# SESSION CONFIGURATION
# =============================================================================
SESSION_DRIVER=redis
SESSION_LIFETIME=120
SESSION_ENCRYPT=true
SESSION_HTTP_ONLY=true
SESSION_SAME_SITE=lax
SESSION_SECURE_COOKIE=true
SESSION_DOMAIN=.your-domain.com

# =============================================================================
# CACHE CONFIGURATION
# =============================================================================
CACHE_DRIVER=redis
CACHE_PREFIX=sso_cache
CACHE_TTL=3600

# =============================================================================
# QUEUE CONFIGURATION
# =============================================================================
QUEUE_CONNECTION=redis
QUEUE_DRIVER=redis

# =============================================================================
# TENANT CONFIGURATION (Central SSO)
# =============================================================================
TENANT_SLUG=central-sso
TENANT_DOMAIN=sso.your-domain.com

# Tenant API Keys (32+ character strings)
TENANT1_API_KEY=tenant1_REPLACE_WITH_32_CHAR_API_KEY
TENANT2_API_KEY=tenant2_REPLACE_WITH_32_CHAR_API_KEY

# HMAC Secrets (64+ character strings)
TENANT1_HMAC_SECRET=REPLACE_WITH_64_CHARACTER_HMAC_SECRET_FOR_TENANT1
TENANT2_HMAC_SECRET=REPLACE_WITH_64_CHARACTER_HMAC_SECRET_FOR_TENANT2

# =============================================================================
# MAIL CONFIGURATION
# =============================================================================
MAIL_MAILER=smtp
MAIL_HOST=smtp.gmail.com
MAIL_PORT=587
MAIL_USERNAME=your-email@gmail.com
MAIL_PASSWORD=your-app-password
MAIL_ENCRYPTION=tls
MAIL_FROM_ADDRESS=noreply@your-domain.com
MAIL_FROM_NAME="${APP_NAME}"

# =============================================================================
# CLOUDFLARE CONFIGURATION
# =============================================================================
CLOUDFLARE_API_TOKEN=REPLACE_WITH_CLOUDFLARE_API_TOKEN
CLOUDFLARE_EMAIL=your-email@example.com
CLOUDFLARE_ZONE_ID=REPLACE_WITH_ZONE_ID

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================
# Password Requirements
PASSWORD_MIN_LENGTH=8
PASSWORD_REQUIRE_UPPERCASE=true
PASSWORD_REQUIRE_LOWERCASE=true
PASSWORD_REQUIRE_NUMBERS=true
PASSWORD_REQUIRE_SYMBOLS=true
PASSWORD_HISTORY_COUNT=5

# Encryption
BCRYPT_ROUNDS=12

# Rate Limiting
THROTTLE_LOGIN_MAX_ATTEMPTS=5
THROTTLE_LOGIN_DECAY_MINUTES=5
THROTTLE_API_MAX_REQUESTS=60
THROTTLE_API_WINDOW_MINUTES=1

# Account Security
ACCOUNT_LOCKOUT_ENABLED=true
ACCOUNT_LOCKOUT_ATTEMPTS=5
ACCOUNT_LOCKOUT_DURATION=300

# =============================================================================
# CORS CONFIGURATION
# =============================================================================
CORS_ALLOWED_ORIGINS=https://sso.your-domain.com,https://tenant-one.your-domain.com,https://tenant-two.your-domain.com
CORS_ALLOWED_HEADERS=accept,authorization,content-type,x-xsrf-token,x-csrf-token,x-requested-with
CORS_ALLOWED_METHODS=GET,POST,PUT,DELETE,OPTIONS
CORS_ALLOW_CREDENTIALS=true

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================
LOG_CHANNEL=daily
LOG_LEVEL=warning
LOG_DEPRECATIONS_CHANNEL=null

# Custom Log Channels
LOG_AUDIT_CHANNEL=audit
LOG_SECURITY_CHANNEL=security
LOG_PERFORMANCE_CHANNEL=performance

# =============================================================================
# MONITORING CONFIGURATION
# =============================================================================
# Laravel Telescope (disable in production)
TELESCOPE_ENABLED=false
TELESCOPE_MIDDLEWARE=auth

# Metrics Collection
METRICS_ENABLED=true
PROMETHEUS_ROUTE_PATH=metrics
PROMETHEUS_STORAGE_ADAPTER=redis
PROMETHEUS_REDIS_DATABASE=2

# =============================================================================
# EXTERNAL SERVICES
# =============================================================================
# AWS Configuration (for backups, file storage)
AWS_ACCESS_KEY_ID=REPLACE_WITH_AWS_ACCESS_KEY
AWS_SECRET_ACCESS_KEY=REPLACE_WITH_AWS_SECRET_KEY
AWS_DEFAULT_REGION=us-east-1
AWS_BUCKET=your-sso-backup-bucket

# Sentry Error Tracking (optional)
SENTRY_DSN=REPLACE_WITH_SENTRY_DSN

# =============================================================================
# FEATURE FLAGS
# =============================================================================
FEATURE_USER_REGISTRATION=true
FEATURE_PASSWORD_RESET=true
FEATURE_MULTI_TENANT_USERS=true
FEATURE_ADVANCED_PERMISSIONS=true
FEATURE_API_RATE_LIMITING=true
FEATURE_REAL_TIME_NOTIFICATIONS=false

# =============================================================================
# BACKUP CONFIGURATION
# =============================================================================
BACKUP_ENABLED=true
BACKUP_SCHEDULE="0 2 * * *"
BACKUP_RETENTION_DAYS=30
BACKUP_STORAGE=local

# =============================================================================
# PERFORMANCE CONFIGURATION
# =============================================================================
# PHP Configuration
PHP_MEMORY_LIMIT=512M
PHP_MAX_EXECUTION_TIME=300
PHP_UPLOAD_MAX_FILESIZE=10M

# Laravel Configuration
VIEW_CACHE_ENABLED=true
ROUTE_CACHE_ENABLED=true
CONFIG_CACHE_ENABLED=true

# =============================================================================
# DEVELOPMENT OVERRIDES (Production: Set to false)
# =============================================================================
APP_DEBUG=false
DEBUGBAR_ENABLED=false
LOG_QUERIES=false

# =============================================================================
# SECURITY NOTES
# =============================================================================
# 1. Generate secure secrets using: openssl rand -base64 32
# 2. Use different passwords for each environment
# 3. Store sensitive values in GitHub Secrets for CI/CD
# 4. Never commit this file with real values to version control
# 5. Use environment variables in production deployment
# 6. Regularly rotate secrets and API keys
# 7. Monitor for unauthorized access attempts
# 8. Enable two-factor authentication where possible

# =============================================================================
# SECRET GENERATION COMMANDS
# =============================================================================
# Run these commands to generate secure secrets:
#
# JWT_SECRET:
# openssl rand -base64 32
#
# Database passwords:
# openssl rand -base64 24
#
# API Keys:
# echo "tenant1_$(openssl rand -hex 16)"
# echo "tenant2_$(openssl rand -hex 16)"
#
# HMAC Secrets:
# openssl rand -hex 32
#
# Laravel App Key:
# php artisan key:generate --show
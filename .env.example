# =============================================================================
# Multi-Tenant SSO System - Environment Configuration Example
# =============================================================================
# Copy this file to .env and configure the values for your environment
# Different applications may need different subsets of these variables

# =============================================================================
# APPLICATION SETTINGS
# =============================================================================

# Basic Laravel Configuration
APP_NAME="Central SSO"
APP_ENV=production
APP_KEY=base64:GENERATE_WITH_php_artisan_key:generate
APP_DEBUG=false
APP_URL=http://localhost:8000

# Application Version (for monitoring and deployment tracking)
APP_VERSION=1.0.0

# Timezone Configuration
APP_TIMEZONE=UTC

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# Primary Database Connection
DB_CONNECTION=mysql
DB_HOST=mariadb
DB_PORT=3306
DB_DATABASE=sso_main
DB_USERNAME=sso_user
DB_PASSWORD=secure_database_password_change_me

# MySQL Root Password (for database administration)
MYSQL_ROOT_PASSWORD=secure_root_password_change_me

# Test Database (for CI/CD testing)
DB_TEST_DATABASE=sso_test

# =============================================================================
# CACHE & SESSION CONFIGURATION
# =============================================================================

# Redis Configuration
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=secure_redis_password_change_me
REDIS_DATABASE=0

# Session Configuration
SESSION_DRIVER=redis
SESSION_LIFETIME=120
SESSION_ENCRYPT=false
SESSION_PATH=/
SESSION_DOMAIN=.localhost
SESSION_SECURE_COOKIES=false

# Cache Configuration
CACHE_DRIVER=redis
CACHE_PREFIX=sso_cache

# =============================================================================
# QUEUE CONFIGURATION
# =============================================================================

QUEUE_CONNECTION=redis
QUEUE_REDIS_CONNECTION=default

# =============================================================================
# JWT TOKEN CONFIGURATION
# =============================================================================

# JWT Secret (generate a secure 32+ character string)
JWT_SECRET=your_secure_jwt_secret_key_32_characters_minimum
JWT_TTL=60
JWT_REFRESH_TTL=20160
JWT_ALGO=HS256

# =============================================================================
# TENANT CONFIGURATION
# =============================================================================

# Current Tenant Identification
TENANT_SLUG=central

# Multi-tenant API Configuration
CENTRAL_SSO_URL=http://central-sso:8000

# Tenant-specific API Keys (32+ character strings)
TENANT1_API_KEY=tenant1_secure_32_character_api_key_here
TENANT2_API_KEY=tenant2_secure_32_character_api_key_here

# HMAC Secrets for Secure Communication (64+ character strings)
TENANT1_HMAC_SECRET=tenant1_secure_64_character_hmac_secret_for_request_signing
TENANT2_HMAC_SECRET=tenant2_secure_64_character_hmac_secret_for_request_signing

# =============================================================================
# CLOUDFLARE TUNNEL CONFIGURATION
# =============================================================================

# Cloudflare API Credentials
CLOUDFLARE_API_TOKEN=your_cloudflare_api_token_with_zone_edit_permissions
CLOUDFLARE_EMAIL=your_cloudflare_account_email@example.com

# Domain Configuration
CLOUDFLARE_ZONE=hi-dil.com
CLOUDFLARE_TUNNEL_NAME=sso-poc-tunnel

# Environment-specific Subdomains
# Production
CENTRAL_SSO_DOMAIN=sso.poc.hi-dil.com
TENANT1_DOMAIN=tenant-one.poc.hi-dil.com
TENANT2_DOMAIN=tenant-two.poc.hi-dil.com

# Staging (uncomment for staging environment)
# CENTRAL_SSO_DOMAIN=staging-sso.poc.hi-dil.com
# TENANT1_DOMAIN=staging-tenant-one.poc.hi-dil.com
# TENANT2_DOMAIN=staging-tenant-two.poc.hi-dil.com

# =============================================================================
# EMAIL CONFIGURATION
# =============================================================================

# Mail Driver Configuration
MAIL_MAILER=smtp
MAIL_HOST=smtp.yourdomain.com
MAIL_PORT=587
MAIL_USERNAME=noreply@yourdomain.com
MAIL_PASSWORD=your_email_password
MAIL_ENCRYPTION=tls
MAIL_FROM_ADDRESS=noreply@yourdomain.com
MAIL_FROM_NAME="${APP_NAME}"

# =============================================================================
# PROMETHEUS MONITORING CONFIGURATION
# =============================================================================

# Prometheus Metrics Configuration
PROMETHEUS_ROUTE_PATH=metrics
PROMETHEUS_ROUTE_MIDDLEWARE=
PROMETHEUS_STORAGE_ADAPTER=redis
PROMETHEUS_REDIS_DATABASE=2
PROMETHEUS_MIDDLEWARE_ENABLED=true

# Metrics Collection Settings
METRICS_ENABLED=true
METRICS_CACHE_TTL=300

# =============================================================================
# GRAFANA CONFIGURATION
# =============================================================================

# Grafana Admin Credentials
GRAFANA_PASSWORD=secure_grafana_admin_password_change_me

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================

# Rate Limiting (requests per minute)
RATE_LIMIT_API=60
RATE_LIMIT_AUTH=10
RATE_LIMIT_AUDIT=100

# Password Requirements
PASSWORD_MIN_LENGTH=8
PASSWORD_REQUIRE_UPPERCASE=true
PASSWORD_REQUIRE_LOWERCASE=true
PASSWORD_REQUIRE_NUMBERS=true
PASSWORD_REQUIRE_SYMBOLS=false

# Session Security
SESSION_SECURE_COOKIES=true
SESSION_HTTP_ONLY=true
SESSION_SAME_SITE=lax

# =============================================================================
# LOGGING & MONITORING
# =============================================================================

# Log Configuration
LOG_CHANNEL=stack
LOG_DEPRECATIONS_CHANNEL=null
LOG_LEVEL=info

# Sentry Error Tracking (optional)
SENTRY_LARAVEL_DSN=your_sentry_dsn_url_here

# =============================================================================
# BACKUP CONFIGURATION
# =============================================================================

# AWS S3 for Database Backups (optional)
AWS_ACCESS_KEY_ID=your_aws_access_key
AWS_SECRET_ACCESS_KEY=your_aws_secret_key
AWS_DEFAULT_REGION=us-east-1
S3_BACKUP_BUCKET=your-sso-backup-bucket

# Backup Schedule
BACKUP_ENABLED=true
BACKUP_RETENTION_DAYS=30

# =============================================================================
# NOTIFICATION CONFIGURATION
# =============================================================================

# Slack Notifications for CI/CD and Monitoring
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/SLACK/WEBHOOK

# PagerDuty Integration (optional)
PAGERDUTY_INTEGRATION_KEY=your_pagerduty_integration_key

# =============================================================================
# TELESCOPE CONFIGURATION (DEVELOPMENT)
# =============================================================================

# Laravel Telescope (set to false in production)
TELESCOPE_ENABLED=false
TELESCOPE_PATH=telescope

# =============================================================================
# DEVELOPMENT & TESTING
# =============================================================================

# Development Tools
DEBUGBAR_ENABLED=false
TELESCOPE_ENABLED=false

# Testing Configuration
TESTING_DATABASE=sso_test
TESTING_REDIS_DATABASE=1

# =============================================================================
# BROADCASTING (OPTIONAL)
# =============================================================================

BROADCAST_DRIVER=log
PUSHER_APP_ID=
PUSHER_APP_KEY=
PUSHER_APP_SECRET=
PUSHER_HOST=
PUSHER_PORT=443
PUSHER_SCHEME=https
PUSHER_APP_CLUSTER=mt1

VITE_PUSHER_APP_KEY="${PUSHER_APP_KEY}"
VITE_PUSHER_HOST="${PUSHER_HOST}"
VITE_PUSHER_PORT="${PUSHER_PORT}"
VITE_PUSHER_SCHEME="${PUSHER_SCHEME}"
VITE_PUSHER_APP_CLUSTER="${PUSHER_APP_CLUSTER}"

# =============================================================================
# CI/CD PIPELINE CONFIGURATION
# =============================================================================

# Build Configuration
BUILD_TARGET=production
CONTAINER_REGISTRY=ghcr.io
CONTAINER_NAMESPACE=yourusername

# Deployment Configuration
DEPLOYMENT_STRATEGY=blue-green
HEALTH_CHECK_TIMEOUT=300
ROLLBACK_ON_FAILURE=true

# =============================================================================
# PERFORMANCE TUNING
# =============================================================================

# PHP Configuration
PHP_MEMORY_LIMIT=256M
PHP_MAX_EXECUTION_TIME=300
PHP_MAX_INPUT_VARS=3000

# Database Connection Pool
DB_CONNECTION_POOL_SIZE=10
DB_CONNECTION_TIMEOUT=60

# Cache TTL Settings
CACHE_USER_TTL=3600
CACHE_TENANT_TTL=7200
CACHE_CONFIG_TTL=86400

# =============================================================================
# ENVIRONMENT-SPECIFIC OVERRIDES
# =============================================================================

# Local Development Overrides
# Uncomment these for local development
# APP_ENV=local
# APP_DEBUG=true
# DB_HOST=127.0.0.1
# REDIS_HOST=127.0.0.1
# SESSION_DOMAIN=localhost
# SESSION_SECURE_COOKIES=false

# Staging Environment Overrides
# Uncomment these for staging environment
# APP_ENV=staging
# APP_DEBUG=false
# LOG_LEVEL=debug

# Production Environment Overrides
# Uncomment these for production environment
# APP_ENV=production
# APP_DEBUG=false
# LOG_LEVEL=error
# SESSION_SECURE_COOKIES=true

# =============================================================================
# ADDITIONAL TENANT CONFIGURATIONS
# =============================================================================
# Copy and modify these sections for additional tenant applications

# Tenant 1 Application Specific
# APP_NAME="Tenant 1 Application"
# TENANT_SLUG=tenant1
# APP_URL=https://tenant-one.poc.hi-dil.com

# Tenant 2 Application Specific  
# APP_NAME="Tenant 2 Application"
# TENANT_SLUG=tenant2
# APP_URL=https://tenant-two.poc.hi-dil.com

# =============================================================================
# SECURITY NOTES
# =============================================================================
# 
# 1. Generate APP_KEY: php artisan key:generate
# 2. Generate JWT_SECRET: openssl rand -base64 32
# 3. Generate secure passwords: openssl rand -base64 32
# 4. Generate HMAC secrets: openssl rand -base64 64
# 5. Never commit .env files to version control
# 6. Use different secrets for each environment
# 7. Rotate secrets regularly in production
# 8. Use environment-specific values for each deployment
#
# =============================================================================